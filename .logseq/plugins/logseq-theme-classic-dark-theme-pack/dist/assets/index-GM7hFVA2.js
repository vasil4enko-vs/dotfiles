(function(){const Y=document.createElement("link").relList;if(Y&&Y.supports&&Y.supports("modulepreload"))return;for(const V of document.querySelectorAll('link[rel="modulepreload"]'))Jt(V);new MutationObserver(V=>{for(const vt of V)if(vt.type==="childList")for(const z of vt.addedNodes)z.tagName==="LINK"&&z.rel==="modulepreload"&&Jt(z)}).observe(document,{childList:!0,subtree:!0});function de(V){const vt={};return V.integrity&&(vt.integrity=V.integrity),V.referrerPolicy&&(vt.referrerPolicy=V.referrerPolicy),V.crossOrigin==="use-credentials"?vt.credentials="include":V.crossOrigin==="anonymous"?vt.credentials="omit":vt.credentials="same-origin",vt}function Jt(V){if(V.ep)return;V.ep=!0;const vt=de(V);fetch(V.href,vt)}})();var wn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kn={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */kn.exports;(function(J,Y){(function(de,Jt){J.exports=Jt()})(self,()=>(()=>{var de={227:(z,h,E)=>{var I=E(155);h.formatArgs=function(N){if(N[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+N[0]+(this.useColors?"%c ":" ")+"+"+z.exports.humanize(this.diff),!this.useColors)return;const Z="color: "+this.color;N.splice(1,0,Z,"color: inherit");let v=0,d=0;N[0].replace(/%[a-zA-Z%]/g,_=>{_!=="%%"&&(v++,_==="%c"&&(d=v))}),N.splice(d,0,Z)},h.save=function(N){try{N?h.storage.setItem("debug",N):h.storage.removeItem("debug")}catch{}},h.load=function(){let N;try{N=h.storage.getItem("debug")}catch{}return!N&&I!==void 0&&"env"in I&&(N=I.env.DEBUG),N},h.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},h.storage=function(){try{return localStorage}catch{}}(),h.destroy=(()=>{let N=!1;return()=>{N||(N=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),h.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],h.log=console.debug||console.log||(()=>{}),z.exports=E(447)(h);const{formatters:O}=z.exports;O.j=function(N){try{return JSON.stringify(N)}catch(Z){return"[UnexpectedJSONParseError]: "+Z.message}}},447:(z,h,E)=>{z.exports=function(I){function O(v){let d,_,u,w=null;function y(...j){if(!y.enabled)return;const R=y,A=Number(new Date),T=A-(d||A);R.diff=T,R.prev=d,R.curr=A,d=A,j[0]=O.coerce(j[0]),typeof j[0]!="string"&&j.unshift("%O");let i=0;j[0]=j[0].replace(/%([a-zA-Z%])/g,(c,m)=>{if(c==="%%")return"%";i++;const g=O.formatters[m];if(typeof g=="function"){const q=j[i];c=g.call(R,q),j.splice(i,1),i--}return c}),O.formatArgs.call(R,j),(R.log||O.log).apply(R,j)}return y.namespace=v,y.useColors=O.useColors(),y.color=O.selectColor(v),y.extend=N,y.destroy=O.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(_!==O.namespaces&&(_=O.namespaces,u=O.enabled(v)),u),set:j=>{w=j}}),typeof O.init=="function"&&O.init(y),y}function N(v,d){const _=O(this.namespace+(d===void 0?":":d)+v);return _.log=this.log,_}function Z(v){return v.toString().substring(2,v.toString().length-2).replace(/\.\*\?$/,"*")}return O.debug=O,O.default=O,O.coerce=function(v){return v instanceof Error?v.stack||v.message:v},O.disable=function(){const v=[...O.names.map(Z),...O.skips.map(Z).map(d=>"-"+d)].join(",");return O.enable(""),v},O.enable=function(v){let d;O.save(v),O.namespaces=v,O.names=[],O.skips=[];const _=(typeof v=="string"?v:"").split(/[\s,]+/),u=_.length;for(d=0;d<u;d++)_[d]&&((v=_[d].replace(/\*/g,".*?"))[0]==="-"?O.skips.push(new RegExp("^"+v.slice(1)+"$")):O.names.push(new RegExp("^"+v+"$")))},O.enabled=function(v){if(v[v.length-1]==="*")return!0;let d,_;for(d=0,_=O.skips.length;d<_;d++)if(O.skips[d].test(v))return!1;for(d=0,_=O.names.length;d<_;d++)if(O.names[d].test(v))return!0;return!1},O.humanize=E(824),O.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(I).forEach(v=>{O[v]=I[v]}),O.names=[],O.skips=[],O.formatters={},O.selectColor=function(v){let d=0;for(let _=0;_<v.length;_++)d=(d<<5)-d+v.charCodeAt(_),d|=0;return O.colors[Math.abs(d)%O.colors.length]},O.enable(O.load()),O}},996:z=>{var h=function(u){return function(w){return!!w&&typeof w=="object"}(u)&&!function(w){var y=Object.prototype.toString.call(w);return y==="[object RegExp]"||y==="[object Date]"||function(j){return j.$$typeof===E}(w)}(u)},E=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function I(u,w){return w.clone!==!1&&w.isMergeableObject(u)?d((y=u,Array.isArray(y)?[]:{}),u,w):u;var y}function O(u,w,y){return u.concat(w).map(function(j){return I(j,y)})}function N(u){return Object.keys(u).concat(function(w){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(w).filter(function(y){return Object.propertyIsEnumerable.call(w,y)}):[]}(u))}function Z(u,w){try{return w in u}catch{return!1}}function v(u,w,y){var j={};return y.isMergeableObject(u)&&N(u).forEach(function(R){j[R]=I(u[R],y)}),N(w).forEach(function(R){(function(A,T){return Z(A,T)&&!(Object.hasOwnProperty.call(A,T)&&Object.propertyIsEnumerable.call(A,T))})(u,R)||(Z(u,R)&&y.isMergeableObject(w[R])?j[R]=function(A,T){if(!T.customMerge)return d;var i=T.customMerge(A);return typeof i=="function"?i:d}(R,y)(u[R],w[R],y):j[R]=I(w[R],y))}),j}function d(u,w,y){(y=y||{}).arrayMerge=y.arrayMerge||O,y.isMergeableObject=y.isMergeableObject||h,y.cloneUnlessOtherwiseSpecified=I;var j=Array.isArray(w);return j===Array.isArray(u)?j?y.arrayMerge(u,w,y):v(u,w,y):I(w,y)}d.all=function(u,w){if(!Array.isArray(u))throw new Error("first argument should be an array");return u.reduce(function(y,j){return d(y,j,w)},{})};var _=d;z.exports=_},856:function(z){z.exports=function(){function h(k){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(k)}function E(k,M){return E=Object.setPrototypeOf||function($,W){return $.__proto__=W,$},E(k,M)}function I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(k,M,$){return O=I()?Reflect.construct:function(W,ft,Nt){var qt=[null];qt.push.apply(qt,ft);var te=new(Function.bind.apply(W,qt));return Nt&&E(te,Nt.prototype),te},O.apply(null,arguments)}function N(k){return Z(k)||v(k)||d(k)||u()}function Z(k){if(Array.isArray(k))return _(k)}function v(k){if(typeof Symbol<"u"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}function d(k,M){if(k){if(typeof k=="string")return _(k,M);var $=Object.prototype.toString.call(k).slice(8,-1);return $==="Object"&&k.constructor&&($=k.constructor.name),$==="Map"||$==="Set"?Array.from(k):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?_(k,M):void 0}}function _(k,M){(M==null||M>k.length)&&(M=k.length);for(var $=0,W=new Array(M);$<M;$++)W[$]=k[$];return W}function u(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=Object.hasOwnProperty,y=Object.setPrototypeOf,j=Object.isFrozen,R=Object.getPrototypeOf,A=Object.getOwnPropertyDescriptor,T=Object.freeze,i=Object.seal,c=Object.create,m=typeof Reflect<"u"&&Reflect,g=m.apply,q=m.construct;g||(g=function(k,M,$){return k.apply(M,$)}),T||(T=function(k){return k}),i||(i=function(k){return k}),q||(q=function(k,M){return O(k,N(M))});var X=Q(Array.prototype.forEach),ot=Q(Array.prototype.pop),ut=Q(Array.prototype.push),bt=Q(String.prototype.toLowerCase),wt=Q(String.prototype.match),gt=Q(String.prototype.replace),Oe=Q(String.prototype.indexOf),f=Q(String.prototype.trim),b=Q(RegExp.prototype.test),U=xt(TypeError);function Q(k){return function(M){for(var $=arguments.length,W=new Array($>1?$-1:0),ft=1;ft<$;ft++)W[ft-1]=arguments[ft];return g(k,M,W)}}function xt(k){return function(){for(var M=arguments.length,$=new Array(M),W=0;W<M;W++)$[W]=arguments[W];return q(k,$)}}function L(k,M){y&&y(k,null);for(var $=M.length;$--;){var W=M[$];if(typeof W=="string"){var ft=bt(W);ft!==W&&(j(M)||(M[$]=ft),W=ft)}k[W]=!0}return k}function G(k){var M,$=c(null);for(M in k)g(w,k,[M])&&($[M]=k[M]);return $}function rt(k,M){for(;k!==null;){var $=A(k,M);if($){if($.get)return Q($.get);if(typeof $.value=="function")return Q($.value)}k=R(k)}function W(ft){return console.warn("fallback value for",ft),null}return W}var St=T(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_t=T(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Et=T(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Xt=T(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ct=T(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),st=T(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kt=T(["#text"]),Ot=T(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Lt=T(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Vt=T(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Tt=T(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),At=i(/\{\{[\w\W]*|[\w\W]*\}\}/gm),pe=i(/<%[\w\W]*|[\w\W]*%>/gm),Cn=i(/^data-[\-\w.\u00B7-\uFFFF]/),Ft=i(/^aria-[\-\w]+$/),Ht=i(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ke=i(/^(?:\w+script|data):/i),Sn=i(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),On=i(/^html$/i),he=function(){return typeof window>"u"?null:window},An=function(k,M){if(h(k)!=="object"||typeof k.createPolicy!="function")return null;var $=null,W="data-tt-policy-suffix";M.currentScript&&M.currentScript.hasAttribute(W)&&($=M.currentScript.getAttribute(W));var ft="dompurify"+($?"#"+$:"");try{return k.createPolicy(ft,{createHTML:function(Nt){return Nt}})}catch{return console.warn("TrustedTypes policy "+ft+" could not be created."),null}};function Ye(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:he(),M=function(o){return Ye(o)};if(M.version="2.3.8",M.removed=[],!k||!k.document||k.document.nodeType!==9)return M.isSupported=!1,M;var $=k.document,W=k.document,ft=k.DocumentFragment,Nt=k.HTMLTemplateElement,qt=k.Node,te=k.Element,Re=k.NodeFilter,Qe=k.NamedNodeMap,Zt=Qe===void 0?k.NamedNodeMap||k.MozNamedAttrMap:Qe,jn=k.HTMLFormElement,En=k.DOMParser,Tn=k.trustedTypes,Ae=te.prototype,Mn=rt(Ae,"cloneNode"),In=rt(Ae,"nextSibling"),Ln=rt(Ae,"childNodes"),Ue=rt(Ae,"parentNode");if(typeof Nt=="function"){var Pt=W.createElement("template");Pt.content&&Pt.content.ownerDocument&&(W=Pt.content.ownerDocument)}var Rt=An(Tn,$),Xe=Rt?Rt.createHTML(""):"",je=W,De=je.implementation,ee=je.createNodeIterator,tn=je.createDocumentFragment,en=je.getElementsByTagName,Fn=$.importNode,nn={};try{nn=G(W).documentMode?W.documentMode:{}}catch{}var Mt={};M.isSupported=typeof Ue=="function"&&De&&De.createHTMLDocument!==void 0&&nn!==9;var me,Bt,Ee=At,Te=pe,$e=Cn,Nn=Ft,rn=Ke,Me=Sn,tt=Ht,dt=null,on=L({},[].concat(N(St),N(_t),N(Et),N(ct),N(kt))),pt=null,ne=L({},[].concat(N(Ot),N(Lt),N(Vt),N(Tt))),at=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),re=null,Ie=null,ze=!0,He=!0,sn=!1,oe=!1,Kt=!1,qe=!1,Be=!1,ie=!1,Le=!1,se=!1,an=!0,Ge=!0,ae=!1,Ut={},ce=null,cn=L({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ln=null,un=L({},["audio","video","img","source","image","track"]),We=null,Yt=L({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),le="http://www.w3.org/1998/Math/MathML",Je="http://www.w3.org/2000/svg",Gt="http://www.w3.org/1999/xhtml",Fe=Gt,fn=!1,ge=["application/xhtml+xml","text/html"],ye="text/html",ue=null,Pn=W.createElement("form"),dn=function(o){return o instanceof RegExp||o instanceof Function},Ve=function(o){ue&&ue===o||(o&&h(o)==="object"||(o={}),o=G(o),dt="ALLOWED_TAGS"in o?L({},o.ALLOWED_TAGS):on,pt="ALLOWED_ATTR"in o?L({},o.ALLOWED_ATTR):ne,We="ADD_URI_SAFE_ATTR"in o?L(G(Yt),o.ADD_URI_SAFE_ATTR):Yt,ln="ADD_DATA_URI_TAGS"in o?L(G(un),o.ADD_DATA_URI_TAGS):un,ce="FORBID_CONTENTS"in o?L({},o.FORBID_CONTENTS):cn,re="FORBID_TAGS"in o?L({},o.FORBID_TAGS):{},Ie="FORBID_ATTR"in o?L({},o.FORBID_ATTR):{},Ut="USE_PROFILES"in o&&o.USE_PROFILES,ze=o.ALLOW_ARIA_ATTR!==!1,He=o.ALLOW_DATA_ATTR!==!1,sn=o.ALLOW_UNKNOWN_PROTOCOLS||!1,oe=o.SAFE_FOR_TEMPLATES||!1,Kt=o.WHOLE_DOCUMENT||!1,ie=o.RETURN_DOM||!1,Le=o.RETURN_DOM_FRAGMENT||!1,se=o.RETURN_TRUSTED_TYPE||!1,Be=o.FORCE_BODY||!1,an=o.SANITIZE_DOM!==!1,Ge=o.KEEP_CONTENT!==!1,ae=o.IN_PLACE||!1,tt=o.ALLOWED_URI_REGEXP||tt,Fe=o.NAMESPACE||Gt,o.CUSTOM_ELEMENT_HANDLING&&dn(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(at.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&dn(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(at.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(at.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),me=me=ge.indexOf(o.PARSER_MEDIA_TYPE)===-1?ye:o.PARSER_MEDIA_TYPE,Bt=me==="application/xhtml+xml"?function(S){return S}:bt,oe&&(He=!1),Le&&(ie=!0),Ut&&(dt=L({},N(kt)),pt=[],Ut.html===!0&&(L(dt,St),L(pt,Ot)),Ut.svg===!0&&(L(dt,_t),L(pt,Lt),L(pt,Tt)),Ut.svgFilters===!0&&(L(dt,Et),L(pt,Lt),L(pt,Tt)),Ut.mathMl===!0&&(L(dt,ct),L(pt,Vt),L(pt,Tt))),o.ADD_TAGS&&(dt===on&&(dt=G(dt)),L(dt,o.ADD_TAGS)),o.ADD_ATTR&&(pt===ne&&(pt=G(pt)),L(pt,o.ADD_ATTR)),o.ADD_URI_SAFE_ATTR&&L(We,o.ADD_URI_SAFE_ATTR),o.FORBID_CONTENTS&&(ce===cn&&(ce=G(ce)),L(ce,o.FORBID_CONTENTS)),Ge&&(dt["#text"]=!0),Kt&&L(dt,["html","head","body"]),dt.table&&(L(dt,["tbody"]),delete re.tbody),T&&T(o),ue=o)},pn=L({},["mi","mo","mn","ms","mtext"]),hn=L({},["foreignobject","desc","title","annotation-xml"]),Rn=L({},["title","style","font","a","script"]),Dt=L({},_t);L(Dt,Et),L(Dt,Xt);var Ne=L({},ct);L(Ne,st);var Un=function(o){var S=Ue(o);S&&S.tagName||(S={namespaceURI:Gt,tagName:"template"});var x=bt(o.tagName),et=bt(S.tagName);return o.namespaceURI===Je?S.namespaceURI===Gt?x==="svg":S.namespaceURI===le?x==="svg"&&(et==="annotation-xml"||pn[et]):!!Dt[x]:o.namespaceURI===le?S.namespaceURI===Gt?x==="math":S.namespaceURI===Je?x==="math"&&hn[et]:!!Ne[x]:o.namespaceURI===Gt&&!(S.namespaceURI===Je&&!hn[et])&&!(S.namespaceURI===le&&!pn[et])&&!Ne[x]&&(Rn[x]||!Dt[x])},$t=function(o){ut(M.removed,{element:o});try{o.parentNode.removeChild(o)}catch{try{o.outerHTML=Xe}catch{o.remove()}}},ve=function(o,S){try{ut(M.removed,{attribute:S.getAttributeNode(o),from:S})}catch{ut(M.removed,{attribute:null,from:S})}if(S.removeAttribute(o),o==="is"&&!pt[o])if(ie||Le)try{$t(S)}catch{}else try{S.setAttribute(o,"")}catch{}},mn=function(o){var S,x;if(Be)o="<remove></remove>"+o;else{var et=wt(o,/^[\r\n\t ]+/);x=et&&et[0]}me==="application/xhtml+xml"&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");var lt=Rt?Rt.createHTML(o):o;if(Fe===Gt)try{S=new En().parseFromString(lt,me)}catch{}if(!S||!S.documentElement){S=De.createDocument(Fe,"template",null);try{S.documentElement.innerHTML=fn?"":lt}catch{}}var yt=S.body||S.documentElement;return o&&x&&yt.insertBefore(W.createTextNode(x),yt.childNodes[0]||null),Fe===Gt?en.call(S,Kt?"html":"body")[0]:Kt?S.documentElement:yt},gn=function(o){return ee.call(o.ownerDocument||o,o,Re.SHOW_ELEMENT|Re.SHOW_COMMENT|Re.SHOW_TEXT,null,!1)},Dn=function(o){return o instanceof jn&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof Zt)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function")},be=function(o){return h(qt)==="object"?o instanceof qt:o&&h(o)==="object"&&typeof o.nodeType=="number"&&typeof o.nodeName=="string"},Ct=function(o,S,x){Mt[o]&&X(Mt[o],function(et){et.call(M,S,x,ue)})},_e=function(o){var S;if(Ct("beforeSanitizeElements",o,null),Dn(o)||b(/[\u0080-\uFFFF]/,o.nodeName))return $t(o),!0;var x=Bt(o.nodeName);if(Ct("uponSanitizeElement",o,{tagName:x,allowedTags:dt}),o.hasChildNodes()&&!be(o.firstElementChild)&&(!be(o.content)||!be(o.content.firstElementChild))&&b(/<[/\w]/g,o.innerHTML)&&b(/<[/\w]/g,o.textContent)||x==="select"&&b(/<template/i,o.innerHTML))return $t(o),!0;if(!dt[x]||re[x]){if(!re[x]&&Qt(x)&&(at.tagNameCheck instanceof RegExp&&b(at.tagNameCheck,x)||at.tagNameCheck instanceof Function&&at.tagNameCheck(x)))return!1;if(Ge&&!ce[x]){var et=Ue(o)||o.parentNode,lt=Ln(o)||o.childNodes;if(lt&&et)for(var yt=lt.length-1;yt>=0;--yt)et.insertBefore(Mn(lt[yt],!0),In(o))}return $t(o),!0}return o instanceof te&&!Un(o)?($t(o),!0):x!=="noscript"&&x!=="noembed"||!b(/<\/no(script|embed)/i,o.innerHTML)?(oe&&o.nodeType===3&&(S=o.textContent,S=gt(S,Ee," "),S=gt(S,Te," "),o.textContent!==S&&(ut(M.removed,{element:o.cloneNode()}),o.textContent=S)),Ct("afterSanitizeElements",o,null),!1):($t(o),!0)},yn=function(o,S,x){if(an&&(S==="id"||S==="name")&&(x in W||x in Pn))return!1;if(!(He&&!Ie[S]&&b($e,S))){if(!(ze&&b(Nn,S))){if(!pt[S]||Ie[S]){if(!(Qt(o)&&(at.tagNameCheck instanceof RegExp&&b(at.tagNameCheck,o)||at.tagNameCheck instanceof Function&&at.tagNameCheck(o))&&(at.attributeNameCheck instanceof RegExp&&b(at.attributeNameCheck,S)||at.attributeNameCheck instanceof Function&&at.attributeNameCheck(S))||S==="is"&&at.allowCustomizedBuiltInElements&&(at.tagNameCheck instanceof RegExp&&b(at.tagNameCheck,x)||at.tagNameCheck instanceof Function&&at.tagNameCheck(x))))return!1}else if(!We[S]){if(!b(tt,gt(x,Me,""))){if((S!=="src"&&S!=="xlink:href"&&S!=="href"||o==="script"||Oe(x,"data:")!==0||!ln[o])&&!(sn&&!b(rn,gt(x,Me,"")))){if(x)return!1}}}}}return!0},Qt=function(o){return o.indexOf("-")>0},we=function(o){var S,x,et,lt;Ct("beforeSanitizeAttributes",o,null);var yt=o.attributes;if(yt){var ht={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pt};for(lt=yt.length;lt--;){var xe=S=yt[lt],Wt=xe.name,jt=xe.namespaceURI;if(x=Wt==="value"?S.value:f(S.value),et=Bt(Wt),ht.attrName=et,ht.attrValue=x,ht.keepAttr=!0,ht.forceKeepAttr=void 0,Ct("uponSanitizeAttribute",o,ht),x=ht.attrValue,!ht.forceKeepAttr&&(ve(Wt,o),ht.keepAttr))if(b(/\/>/i,x))ve(Wt,o);else{oe&&(x=gt(x,Ee," "),x=gt(x,Te," "));var Ze=Bt(o.nodeName);if(yn(Ze,et,x))try{jt?o.setAttributeNS(jt,Wt,x):o.setAttribute(Wt,x),ot(M.removed)}catch{}}}Ct("afterSanitizeAttributes",o,null)}},$n=function o(S){var x,et=gn(S);for(Ct("beforeSanitizeShadowDOM",S,null);x=et.nextNode();)Ct("uponSanitizeShadowNode",x,null),_e(x)||(x.content instanceof ft&&o(x.content),we(x));Ct("afterSanitizeShadowDOM",S,null)};return M.sanitize=function(o,S){var x,et,lt,yt,ht;if((fn=!o)&&(o="<!-->"),typeof o!="string"&&!be(o)){if(typeof o.toString!="function")throw U("toString is not a function");if(typeof(o=o.toString())!="string")throw U("dirty is not a string, aborting")}if(!M.isSupported){if(h(k.toStaticHTML)==="object"||typeof k.toStaticHTML=="function"){if(typeof o=="string")return k.toStaticHTML(o);if(be(o))return k.toStaticHTML(o.outerHTML)}return o}if(qe||Ve(S),M.removed=[],typeof o=="string"&&(ae=!1),ae){if(o.nodeName){var xe=Bt(o.nodeName);if(!dt[xe]||re[xe])throw U("root node is forbidden and cannot be sanitized in-place")}}else if(o instanceof qt)(et=(x=mn("<!---->")).ownerDocument.importNode(o,!0)).nodeType===1&&et.nodeName==="BODY"||et.nodeName==="HTML"?x=et:x.appendChild(et);else{if(!ie&&!oe&&!Kt&&o.indexOf("<")===-1)return Rt&&se?Rt.createHTML(o):o;if(!(x=mn(o)))return ie?null:se?Xe:""}x&&Be&&$t(x.firstChild);for(var Wt=gn(ae?o:x);lt=Wt.nextNode();)lt.nodeType===3&&lt===yt||_e(lt)||(lt.content instanceof ft&&$n(lt.content),we(lt),yt=lt);if(yt=null,ae)return o;if(ie){if(Le)for(ht=tn.call(x.ownerDocument);x.firstChild;)ht.appendChild(x.firstChild);else ht=x;return pt.shadowroot&&(ht=Fn.call($,ht,!0)),ht}var jt=Kt?x.outerHTML:x.innerHTML;return Kt&&dt["!doctype"]&&x.ownerDocument&&x.ownerDocument.doctype&&x.ownerDocument.doctype.name&&b(On,x.ownerDocument.doctype.name)&&(jt="<!DOCTYPE "+x.ownerDocument.doctype.name+`>
`+jt),oe&&(jt=gt(jt,Ee," "),jt=gt(jt,Te," ")),Rt&&se?Rt.createHTML(jt):jt},M.setConfig=function(o){Ve(o),qe=!0},M.clearConfig=function(){ue=null,qe=!1},M.isValidAttribute=function(o,S,x){ue||Ve({});var et=Bt(o),lt=Bt(S);return yn(et,lt,x)},M.addHook=function(o,S){typeof S=="function"&&(Mt[o]=Mt[o]||[],ut(Mt[o],S))},M.removeHook=function(o){if(Mt[o])return ot(Mt[o])},M.removeHooks=function(o){Mt[o]&&(Mt[o]=[])},M.removeAllHooks=function(){Mt={}},M}return Ye()}()},729:z=>{var h=Object.prototype.hasOwnProperty,E="~";function I(){}function O(d,_,u){this.fn=d,this.context=_,this.once=u||!1}function N(d,_,u,w,y){if(typeof u!="function")throw new TypeError("The listener must be a function");var j=new O(u,w||d,y),R=E?E+_:_;return d._events[R]?d._events[R].fn?d._events[R]=[d._events[R],j]:d._events[R].push(j):(d._events[R]=j,d._eventsCount++),d}function Z(d,_){--d._eventsCount==0?d._events=new I:delete d._events[_]}function v(){this._events=new I,this._eventsCount=0}Object.create&&(I.prototype=Object.create(null),new I().__proto__||(E=!1)),v.prototype.eventNames=function(){var d,_,u=[];if(this._eventsCount===0)return u;for(_ in d=this._events)h.call(d,_)&&u.push(E?_.slice(1):_);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},v.prototype.listeners=function(d){var _=E?E+d:d,u=this._events[_];if(!u)return[];if(u.fn)return[u.fn];for(var w=0,y=u.length,j=new Array(y);w<y;w++)j[w]=u[w].fn;return j},v.prototype.listenerCount=function(d){var _=E?E+d:d,u=this._events[_];return u?u.fn?1:u.length:0},v.prototype.emit=function(d,_,u,w,y,j){var R=E?E+d:d;if(!this._events[R])return!1;var A,T,i=this._events[R],c=arguments.length;if(i.fn){switch(i.once&&this.removeListener(d,i.fn,void 0,!0),c){case 1:return i.fn.call(i.context),!0;case 2:return i.fn.call(i.context,_),!0;case 3:return i.fn.call(i.context,_,u),!0;case 4:return i.fn.call(i.context,_,u,w),!0;case 5:return i.fn.call(i.context,_,u,w,y),!0;case 6:return i.fn.call(i.context,_,u,w,y,j),!0}for(T=1,A=new Array(c-1);T<c;T++)A[T-1]=arguments[T];i.fn.apply(i.context,A)}else{var m,g=i.length;for(T=0;T<g;T++)switch(i[T].once&&this.removeListener(d,i[T].fn,void 0,!0),c){case 1:i[T].fn.call(i[T].context);break;case 2:i[T].fn.call(i[T].context,_);break;case 3:i[T].fn.call(i[T].context,_,u);break;case 4:i[T].fn.call(i[T].context,_,u,w);break;default:if(!A)for(m=1,A=new Array(c-1);m<c;m++)A[m-1]=arguments[m];i[T].fn.apply(i[T].context,A)}}return!0},v.prototype.on=function(d,_,u){return N(this,d,_,u,!1)},v.prototype.once=function(d,_,u){return N(this,d,_,u,!0)},v.prototype.removeListener=function(d,_,u,w){var y=E?E+d:d;if(!this._events[y])return this;if(!_)return Z(this,y),this;var j=this._events[y];if(j.fn)j.fn!==_||w&&!j.once||u&&j.context!==u||Z(this,y);else{for(var R=0,A=[],T=j.length;R<T;R++)(j[R].fn!==_||w&&!j[R].once||u&&j[R].context!==u)&&A.push(j[R]);A.length?this._events[y]=A.length===1?A[0]:A:Z(this,y)}return this},v.prototype.removeAllListeners=function(d){var _;return d?(_=E?E+d:d,this._events[_]&&Z(this,_)):(this._events=new I,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=E,v.EventEmitter=v,z.exports=v},717:z=>{typeof Object.create=="function"?z.exports=function(h,E){h.super_=E,h.prototype=Object.create(E.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}})}:z.exports=function(h,E){h.super_=E;var I=function(){};I.prototype=E.prototype,h.prototype=new I,h.prototype.constructor=h}},824:z=>{var h=1e3,E=60*h,I=60*E,O=24*I,N=7*O,Z=365.25*O;function v(d,_,u,w){var y=_>=1.5*u;return Math.round(d/u)+" "+w+(y?"s":"")}z.exports=function(d,_){_=_||{};var u=typeof d;if(u==="string"&&d.length>0)return function(w){if(!((w=String(w)).length>100)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(w);if(y){var j=parseFloat(y[1]);switch((y[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return j*Z;case"weeks":case"week":case"w":return j*N;case"days":case"day":case"d":return j*O;case"hours":case"hour":case"hrs":case"hr":case"h":return j*I;case"minutes":case"minute":case"mins":case"min":case"m":return j*E;case"seconds":case"second":case"secs":case"sec":case"s":return j*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return j;default:return}}}}(d);if(u==="number"&&isFinite(d))return _.long?function(w){var y=Math.abs(w);return y>=O?v(w,y,O,"day"):y>=I?v(w,y,I,"hour"):y>=E?v(w,y,E,"minute"):y>=h?v(w,y,h,"second"):w+" ms"}(d):function(w){var y=Math.abs(w);return y>=O?Math.round(w/O)+"d":y>=I?Math.round(w/I)+"h":y>=E?Math.round(w/E)+"m":y>=h?Math.round(w/h)+"s":w+"ms"}(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))}},520:(z,h,E)=>{var I=E(155),O=I.platform==="win32",N=E(539);function Z(i,c){for(var m=[],g=0;g<i.length;g++){var q=i[g];q&&q!=="."&&(q===".."?m.length&&m[m.length-1]!==".."?m.pop():c&&m.push(".."):m.push(q))}return m}function v(i){for(var c=i.length-1,m=0;m<=c&&!i[m];m++);for(var g=c;g>=0&&!i[g];g--);return m===0&&g===c?i:m>g?[]:i.slice(m,g+1)}var d=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,_=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,u={};function w(i){var c=d.exec(i),m=(c[1]||"")+(c[2]||""),g=c[3]||"",q=_.exec(g);return[m,q[1],q[2],q[3]]}function y(i){var c=d.exec(i),m=c[1]||"",g=!!m&&m[1]!==":";return{device:m,isUnc:g,isAbsolute:g||!!c[2],tail:c[3]}}function j(i){return"\\\\"+i.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}u.resolve=function(){for(var i="",c="",m=!1,g=arguments.length-1;g>=-1;g--){var q;if(g>=0?q=arguments[g]:i?(q=I.env["="+i])&&q.substr(0,3).toLowerCase()===i.toLowerCase()+"\\"||(q=i+"\\"):q=I.cwd(),!N.isString(q))throw new TypeError("Arguments to path.resolve must be strings");if(q){var X=y(q),ot=X.device,ut=X.isUnc,bt=X.isAbsolute,wt=X.tail;if((!ot||!i||ot.toLowerCase()===i.toLowerCase())&&(i||(i=ot),m||(c=wt+"\\"+c,m=bt),i&&m))break}}return ut&&(i=j(i)),i+(m?"\\":"")+(c=Z(c.split(/[\\\/]+/),!m).join("\\"))||"."},u.normalize=function(i){var c=y(i),m=c.device,g=c.isUnc,q=c.isAbsolute,X=c.tail,ot=/[\\\/]$/.test(X);return(X=Z(X.split(/[\\\/]+/),!q).join("\\"))||q||(X="."),X&&ot&&(X+="\\"),g&&(m=j(m)),m+(q?"\\":"")+X},u.isAbsolute=function(i){return y(i).isAbsolute},u.join=function(){for(var i=[],c=0;c<arguments.length;c++){var m=arguments[c];if(!N.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&i.push(m)}var g=i.join("\\");return/^[\\\/]{2}[^\\\/]/.test(i[0])||(g=g.replace(/^[\\\/]{2,}/,"\\")),u.normalize(g)},u.relative=function(i,c){i=u.resolve(i),c=u.resolve(c);for(var m=i.toLowerCase(),g=c.toLowerCase(),q=v(c.split("\\")),X=v(m.split("\\")),ot=v(g.split("\\")),ut=Math.min(X.length,ot.length),bt=ut,wt=0;wt<ut;wt++)if(X[wt]!==ot[wt]){bt=wt;break}if(bt==0)return c;var gt=[];for(wt=bt;wt<X.length;wt++)gt.push("..");return(gt=gt.concat(q.slice(bt))).join("\\")},u._makeLong=function(i){if(!N.isString(i))return i;if(!i)return"";var c=u.resolve(i);return/^[a-zA-Z]\:\\/.test(c)?"\\\\?\\"+c:/^\\\\[^?.]/.test(c)?"\\\\?\\UNC\\"+c.substring(2):i},u.dirname=function(i){var c=w(i),m=c[0],g=c[1];return m||g?(g&&(g=g.substr(0,g.length-1)),m+g):"."},u.basename=function(i,c){var m=w(i)[2];return c&&m.substr(-1*c.length)===c&&(m=m.substr(0,m.length-c.length)),m},u.extname=function(i){return w(i)[3]},u.format=function(i){if(!N.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var c=i.root||"";if(!N.isString(c))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);var m=i.dir,g=i.base||"";return m?m[m.length-1]===u.sep?m+g:m+u.sep+g:g},u.parse=function(i){if(!N.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var c=w(i);if(!c||c.length!==4)throw new TypeError("Invalid path '"+i+"'");return{root:c[0],dir:c[0]+c[1].slice(0,-1),base:c[2],ext:c[3],name:c[2].slice(0,c[2].length-c[3].length)}},u.sep="\\",u.delimiter=";";var R=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,A={};function T(i){return R.exec(i).slice(1)}A.resolve=function(){for(var i="",c=!1,m=arguments.length-1;m>=-1&&!c;m--){var g=m>=0?arguments[m]:I.cwd();if(!N.isString(g))throw new TypeError("Arguments to path.resolve must be strings");g&&(i=g+"/"+i,c=g[0]==="/")}return(c?"/":"")+(i=Z(i.split("/"),!c).join("/"))||"."},A.normalize=function(i){var c=A.isAbsolute(i),m=i&&i[i.length-1]==="/";return(i=Z(i.split("/"),!c).join("/"))||c||(i="."),i&&m&&(i+="/"),(c?"/":"")+i},A.isAbsolute=function(i){return i.charAt(0)==="/"},A.join=function(){for(var i="",c=0;c<arguments.length;c++){var m=arguments[c];if(!N.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&(i+=i?"/"+m:m)}return A.normalize(i)},A.relative=function(i,c){i=A.resolve(i).substr(1),c=A.resolve(c).substr(1);for(var m=v(i.split("/")),g=v(c.split("/")),q=Math.min(m.length,g.length),X=q,ot=0;ot<q;ot++)if(m[ot]!==g[ot]){X=ot;break}var ut=[];for(ot=X;ot<m.length;ot++)ut.push("..");return(ut=ut.concat(g.slice(X))).join("/")},A._makeLong=function(i){return i},A.dirname=function(i){var c=T(i),m=c[0],g=c[1];return m||g?(g&&(g=g.substr(0,g.length-1)),m+g):"."},A.basename=function(i,c){var m=T(i)[2];return c&&m.substr(-1*c.length)===c&&(m=m.substr(0,m.length-c.length)),m},A.extname=function(i){return T(i)[3]},A.format=function(i){if(!N.isObject(i))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof i);var c=i.root||"";if(!N.isString(c))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof i.root);return(i.dir?i.dir+A.sep:"")+(i.base||"")},A.parse=function(i){if(!N.isString(i))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof i);var c=T(i);if(!c||c.length!==4)throw new TypeError("Invalid path '"+i+"'");return c[1]=c[1]||"",c[2]=c[2]||"",c[3]=c[3]||"",{root:c[0],dir:c[0]+c[1].slice(0,-1),base:c[2],ext:c[3],name:c[2].slice(0,c[2].length-c[3].length)}},A.sep="/",A.delimiter=":",z.exports=O?u:A,z.exports.posix=A,z.exports.win32=u},155:z=>{var h,E,I=z.exports={};function O(){throw new Error("setTimeout has not been defined")}function N(){throw new Error("clearTimeout has not been defined")}function Z(A){if(h===setTimeout)return setTimeout(A,0);if((h===O||!h)&&setTimeout)return h=setTimeout,setTimeout(A,0);try{return h(A,0)}catch{try{return h.call(null,A,0)}catch{return h.call(this,A,0)}}}(function(){try{h=typeof setTimeout=="function"?setTimeout:O}catch{h=O}try{E=typeof clearTimeout=="function"?clearTimeout:N}catch{E=N}})();var v,d=[],_=!1,u=-1;function w(){_&&v&&(_=!1,v.length?d=v.concat(d):u=-1,d.length&&y())}function y(){if(!_){var A=Z(w);_=!0;for(var T=d.length;T;){for(v=d,d=[];++u<T;)v&&v[u].run();u=-1,T=d.length}v=null,_=!1,function(i){if(E===clearTimeout)return clearTimeout(i);if((E===N||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(i);try{E(i)}catch{try{return E.call(null,i)}catch{return E.call(this,i)}}}(A)}}function j(A,T){this.fun=A,this.array=T}function R(){}I.nextTick=function(A){var T=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)T[i-1]=arguments[i];d.push(new j(A,T)),d.length!==1||_||Z(y)},j.prototype.run=function(){this.fun.apply(null,this.array)},I.title="browser",I.browser=!0,I.env={},I.argv=[],I.version="",I.versions={},I.on=R,I.addListener=R,I.once=R,I.off=R,I.removeListener=R,I.removeAllListeners=R,I.emit=R,I.prependListener=R,I.prependOnceListener=R,I.listeners=function(A){return[]},I.binding=function(A){throw new Error("process.binding is not supported")},I.cwd=function(){return"/"},I.chdir=function(A){throw new Error("process.chdir is not supported")},I.umask=function(){return 0}},384:z=>{z.exports=function(h){return h&&typeof h=="object"&&typeof h.copy=="function"&&typeof h.fill=="function"&&typeof h.readUInt8=="function"}},539:(z,h,E)=>{var I=E(155),O=/%[sdj%]/g;h.format=function(f){if(!i(f)){for(var b=[],U=0;U<arguments.length;U++)b.push(v(arguments[U]));return b.join(" ")}U=1;for(var Q=arguments,xt=Q.length,L=String(f).replace(O,function(rt){if(rt==="%%")return"%";if(U>=xt)return rt;switch(rt){case"%s":return String(Q[U++]);case"%d":return Number(Q[U++]);case"%j":try{return JSON.stringify(Q[U++])}catch{return"[Circular]"}default:return rt}}),G=Q[U];U<xt;G=Q[++U])A(G)||!g(G)?L+=" "+G:L+=" "+v(G);return L},h.deprecate=function(f,b){if(c(E.g.process))return function(){return h.deprecate(f,b).apply(this,arguments)};if(I.noDeprecation===!0)return f;var U=!1;return function(){if(!U){if(I.throwDeprecation)throw new Error(b);I.traceDeprecation?console.trace(b):console.error(b),U=!0}return f.apply(this,arguments)}};var N,Z={};function v(f,b){var U={seen:[],stylize:_};return arguments.length>=3&&(U.depth=arguments[2]),arguments.length>=4&&(U.colors=arguments[3]),R(b)?U.showHidden=b:b&&h._extend(U,b),c(U.showHidden)&&(U.showHidden=!1),c(U.depth)&&(U.depth=2),c(U.colors)&&(U.colors=!1),c(U.customInspect)&&(U.customInspect=!0),U.colors&&(U.stylize=d),u(U,f,U.depth)}function d(f,b){var U=v.styles[b];return U?"\x1B["+v.colors[U][0]+"m"+f+"\x1B["+v.colors[U][1]+"m":f}function _(f,b){return f}function u(f,b,U){if(f.customInspect&&b&&ot(b.inspect)&&b.inspect!==h.inspect&&(!b.constructor||b.constructor.prototype!==b)){var Q=b.inspect(U,f);return i(Q)||(Q=u(f,Q,U)),Q}var xt=function(ct,st){if(c(st))return ct.stylize("undefined","undefined");if(i(st)){var kt="'"+JSON.stringify(st).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ct.stylize(kt,"string")}if(T(st))return ct.stylize(""+st,"number");if(R(st))return ct.stylize(""+st,"boolean");if(A(st))return ct.stylize("null","null")}(f,b);if(xt)return xt;var L=Object.keys(b),G=function(ct){var st={};return ct.forEach(function(kt,Ot){st[kt]=!0}),st}(L);if(f.showHidden&&(L=Object.getOwnPropertyNames(b)),X(b)&&(L.indexOf("message")>=0||L.indexOf("description")>=0))return w(b);if(L.length===0){if(ot(b)){var rt=b.name?": "+b.name:"";return f.stylize("[Function"+rt+"]","special")}if(m(b))return f.stylize(RegExp.prototype.toString.call(b),"regexp");if(q(b))return f.stylize(Date.prototype.toString.call(b),"date");if(X(b))return w(b)}var St,_t="",Et=!1,Xt=["{","}"];return j(b)&&(Et=!0,Xt=["[","]"]),ot(b)&&(_t=" [Function"+(b.name?": "+b.name:"")+"]"),m(b)&&(_t=" "+RegExp.prototype.toString.call(b)),q(b)&&(_t=" "+Date.prototype.toUTCString.call(b)),X(b)&&(_t=" "+w(b)),L.length!==0||Et&&b.length!=0?U<0?m(b)?f.stylize(RegExp.prototype.toString.call(b),"regexp"):f.stylize("[Object]","special"):(f.seen.push(b),St=Et?function(ct,st,kt,Ot,Lt){for(var Vt=[],Tt=0,At=st.length;Tt<At;++Tt)Oe(st,String(Tt))?Vt.push(y(ct,st,kt,Ot,String(Tt),!0)):Vt.push("");return Lt.forEach(function(pe){pe.match(/^\d+$/)||Vt.push(y(ct,st,kt,Ot,pe,!0))}),Vt}(f,b,U,G,L):L.map(function(ct){return y(f,b,U,G,ct,Et)}),f.seen.pop(),function(ct,st,kt){return ct.reduce(function(Ot,Lt){return Lt.indexOf(`
`)>=0,Ot+Lt.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?kt[0]+(st===""?"":st+`
 `)+" "+ct.join(`,
  `)+" "+kt[1]:kt[0]+st+" "+ct.join(", ")+" "+kt[1]}(St,_t,Xt)):Xt[0]+_t+Xt[1]}function w(f){return"["+Error.prototype.toString.call(f)+"]"}function y(f,b,U,Q,xt,L){var G,rt,St;if((St=Object.getOwnPropertyDescriptor(b,xt)||{value:b[xt]}).get?rt=St.set?f.stylize("[Getter/Setter]","special"):f.stylize("[Getter]","special"):St.set&&(rt=f.stylize("[Setter]","special")),Oe(Q,xt)||(G="["+xt+"]"),rt||(f.seen.indexOf(St.value)<0?(rt=A(U)?u(f,St.value,null):u(f,St.value,U-1)).indexOf(`
`)>-1&&(rt=L?rt.split(`
`).map(function(_t){return"  "+_t}).join(`
`).substr(2):`
`+rt.split(`
`).map(function(_t){return"   "+_t}).join(`
`)):rt=f.stylize("[Circular]","special")),c(G)){if(L&&xt.match(/^\d+$/))return rt;(G=JSON.stringify(""+xt)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(G=G.substr(1,G.length-2),G=f.stylize(G,"name")):(G=G.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),G=f.stylize(G,"string"))}return G+": "+rt}function j(f){return Array.isArray(f)}function R(f){return typeof f=="boolean"}function A(f){return f===null}function T(f){return typeof f=="number"}function i(f){return typeof f=="string"}function c(f){return f===void 0}function m(f){return g(f)&&ut(f)==="[object RegExp]"}function g(f){return typeof f=="object"&&f!==null}function q(f){return g(f)&&ut(f)==="[object Date]"}function X(f){return g(f)&&(ut(f)==="[object Error]"||f instanceof Error)}function ot(f){return typeof f=="function"}function ut(f){return Object.prototype.toString.call(f)}function bt(f){return f<10?"0"+f.toString(10):f.toString(10)}h.debuglog=function(f){if(c(N)&&(N=I.env.NODE_DEBUG||""),f=f.toUpperCase(),!Z[f])if(new RegExp("\\b"+f+"\\b","i").test(N)){var b=I.pid;Z[f]=function(){var U=h.format.apply(h,arguments);console.error("%s %d: %s",f,b,U)}}else Z[f]=function(){};return Z[f]},h.inspect=v,v.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},v.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},h.isArray=j,h.isBoolean=R,h.isNull=A,h.isNullOrUndefined=function(f){return f==null},h.isNumber=T,h.isString=i,h.isSymbol=function(f){return typeof f=="symbol"},h.isUndefined=c,h.isRegExp=m,h.isObject=g,h.isDate=q,h.isError=X,h.isFunction=ot,h.isPrimitive=function(f){return f===null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||typeof f=="symbol"||f===void 0},h.isBuffer=E(384);var wt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function gt(){var f=new Date,b=[bt(f.getHours()),bt(f.getMinutes()),bt(f.getSeconds())].join(":");return[f.getDate(),wt[f.getMonth()],b].join(" ")}function Oe(f,b){return Object.prototype.hasOwnProperty.call(f,b)}h.log=function(){console.log("%s - %s",gt(),h.format.apply(h,arguments))},h.inherits=E(717),h._extend=function(f,b){if(!b||!g(b))return f;for(var U=Object.keys(b),Q=U.length;Q--;)f[U[Q]]=b[U[Q]];return f}}},Jt={};function V(z){var h=Jt[z];if(h!==void 0)return h.exports;var E=Jt[z]={exports:{}};return de[z].call(E.exports,E,E.exports,V),E.exports}V.n=z=>{var h=z&&z.__esModule?()=>z.default:()=>z;return V.d(h,{a:h}),h},V.d=(z,h)=>{for(var E in h)V.o(h,E)&&!V.o(z,E)&&Object.defineProperty(z,E,{enumerable:!0,get:h[E]})},V.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),V.o=(z,h)=>Object.prototype.hasOwnProperty.call(z,h),V.r=z=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})};var vt={};return(()=>{V.r(vt),V.d(vt,{LSPluginUser:()=>Vn,setupPluginUserInstance:()=>Or});var z=V(520),h=(V(856),V(996)),E=V.n(h),I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},I.apply(this,arguments)};function O(e){return e.toLowerCase()}var N=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Z=/[^A-Z0-9]+/gi;function v(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce(function(r,s){return r.replace(s,n)},e)}function d(e,t){return t===void 0&&(t={}),function(n,r){r===void 0&&(r={});for(var s=r.splitRegexp,a=s===void 0?N:s,l=r.stripRegexp,p=l===void 0?Z:l,C=r.transform,P=C===void 0?O:C,D=r.delimiter,F=D===void 0?" ":D,H=v(v(n,a,"$1\0$2"),p,"\0"),K=0,B=H.length;H.charAt(K)==="\0";)K++;for(;H.charAt(B-1)==="\0";)B--;return H.slice(K,B).split("\0").map(P).join(F)}(e,I({delimiter:"."},t))}var _=V(729),u=V.n(_);function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y=navigator.platform.toLowerCase()==="win32"?z.win32:z.posix,j=function(e,t){return t===void 0&&(t={}),d(e,I({delimiter:"_"},t))};class R extends u(){constructor(t,n){super(),w(this,"_tag",void 0),w(this,"_opts",void 0),w(this,"_logs",[]),this._tag=t,this._opts=n}write(t,n,r){var s;n!=null&&n.length&&n[n.length-1]===!0&&(r=!0,n.pop());const a=n.reduce((p,C)=>(C&&C instanceof Error?p+=`${C.message} ${C.stack}`:p+=C.toString(),p),`[${this._tag}][${new Date().toLocaleTimeString()}] `);var l;this._logs.push([t,a]),(r||(s=this._opts)!==null&&s!==void 0&&s.console)&&((l=console)===null||l===void 0||l[t==="ERROR"?"error":"debug"](`${t}: ${a}`)),this.emit("change")}clear(){this._logs=[],this.emit("change")}info(...t){this.write("INFO",t)}error(...t){this.write("ERROR",t)}warn(...t){this.write("WARN",t)}setTag(t){this._tag=t}toJSON(){return this._logs}}function A(e,...t){try{const n=new URL(e);if(!n.origin)throw new Error(null);const r=y.join(e.substr(n.origin.length),...t);return n.origin+r}catch{return y.join(e,...t)}}function T(e,t){let n,r,s=!1;const a=p=>C=>{e&&clearTimeout(e),p(C),s=!0},l=new Promise((p,C)=>{n=a(p),r=a(C),e&&(e=setTimeout(()=>r(new Error(`[deferred timeout] ${t}`)),e))});return{created:Date.now(),setTag:p=>t=p,resolve:n,reject:r,promise:l,get settled(){return s}}}const i=new Map;window.__injectedUIEffects=i;var c=V(227),m=V.n(c);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const q="application/x-postmate-v1+json";let X=0;const ot={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},ut=(e,t)=>(typeof t!="string"||e.origin===t)&&!!e.data&&(typeof e.data!="object"||"postmate"in e.data)&&e.data.type===q&&!!ot[e.data.postmate];class bt{constructor(t){g(this,"parent",void 0),g(this,"frame",void 0),g(this,"child",void 0),g(this,"events",{}),g(this,"childOrigin",void 0),g(this,"listener",void 0),this.parent=t.parent,this.frame=t.frame,this.child=t.child,this.childOrigin=t.childOrigin,this.listener=n=>{if(!ut(n,this.childOrigin))return!1;const{data:r,name:s}=((n||{}).data||{}).value||{};n.data.postmate==="emit"&&s in this.events&&this.events[s].forEach(a=>{a.call(this,r)})},this.parent.addEventListener("message",this.listener,!1)}get(t,...n){return new Promise((r,s)=>{const a=++X,l=p=>{p.data.uid===a&&p.data.postmate==="reply"&&(this.parent.removeEventListener("message",l,!1),p.data.error?s(p.data.error):r(p.data.value))};this.parent.addEventListener("message",l,!1),this.child.postMessage({postmate:"request",type:q,property:t,args:n,uid:a},this.childOrigin)})}call(t,n){this.child.postMessage({postmate:"call",type:q,property:t,data:n},this.childOrigin)}on(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class wt{constructor(t){g(this,"model",void 0),g(this,"parent",void 0),g(this,"parentOrigin",void 0),g(this,"child",void 0),this.model=t.model,this.parent=t.parent,this.parentOrigin=t.parentOrigin,this.child=t.child,this.child.addEventListener("message",n=>{if(!ut(n,this.parentOrigin))return;const{property:r,uid:s,data:a,args:l}=n.data;n.data.postmate!=="call"?((p,C,P)=>{const D=typeof p[C]=="function"?p[C].apply(null,P):p[C];return Promise.resolve(D)})(this.model,r,l).then(p=>{n.source.postMessage({property:r,postmate:"reply",type:q,uid:s,value:p},n.origin)}).catch(p=>{n.source.postMessage({property:r,postmate:"reply",type:q,uid:s,error:p},n.origin)}):r in this.model&&typeof this.model[r]=="function"&&this.model[r](a)})}emit(t,n){this.parent.postMessage({postmate:"emit",type:q,value:{name:t,data:n}},this.parentOrigin)}}class gt{constructor(t){g(this,"container",void 0),g(this,"parent",void 0),g(this,"frame",void 0),g(this,"child",void 0),g(this,"childOrigin",void 0),g(this,"url",void 0),g(this,"model",void 0),this.container=t.container,this.url=t.url,this.parent=window,this.frame=document.createElement("iframe"),t.id&&(this.frame.id=t.id),t.name&&(this.frame.name=t.name),this.frame.classList.add.apply(this.frame.classList,t.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=t.model||{}}sendHandshake(t){const n=(a=>{const l=document.createElement("a");l.href=a;const p=l.protocol.length>4?l.protocol:window.location.protocol,C=l.host.length?l.port==="80"||l.port==="443"?l.hostname:l.host:window.location.host;return l.origin||`${p}//${C}`})(t=t||this.url);let r,s=0;return new Promise((a,l)=>{const p=P=>!!ut(P,n)&&(P.data.postmate==="handshake-reply"?(clearInterval(r),this.parent.removeEventListener("message",p,!1),this.childOrigin=P.origin,a(new bt(this))):l("Failed handshake"));this.parent.addEventListener("message",p,!1);const C=()=>{s++,this.child.postMessage({postmate:"handshake",type:q,model:this.model},n),s===5&&clearInterval(r)};this.frame.addEventListener("load",()=>{C(),r=setInterval(C,500)}),this.frame.src=t})}destroy(){this.frame.parentNode.removeChild(this.frame)}}g(gt,"debug",!1),g(gt,"Model",void 0);class Oe{constructor(t){g(this,"child",void 0),g(this,"model",void 0),g(this,"parent",void 0),g(this,"parentOrigin",void 0),this.child=window,this.model=t,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((t,n)=>{const r=s=>{if(s.data.postmate){if(s.data.postmate==="handshake"){this.child.removeEventListener("message",r,!1),s.source.postMessage({postmate:"handshake-reply",type:q},s.origin),this.parentOrigin=s.origin;const a=s.data.model;return a&&Object.keys(a).forEach(l=>{this.model[l]=a[l]}),t(new wt(this))}return n("Handshake Reply Failed")}};this.child.addEventListener("message",r,!1)})}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{importHTML:b,createSandboxContainer:U}=window.QSandbox||{};function Q(e,t){return e.startsWith("http")?fetch(e,t):(e=e.replace("file://",""),new Promise(async(n,r)=>{try{const s=await window.apis.doAction(["readFile",e]);n({text:()=>s})}catch(s){console.error(s),r(s)}}))}class xt extends u(){constructor(t){super(),f(this,"_pluginLocal",void 0),f(this,"_frame",void 0),f(this,"_root",void 0),f(this,"_loaded",!1),f(this,"_unmountFns",[]),this._pluginLocal=t,t._dispose(()=>{this._unmount()})}async load(){const{name:t,entry:n}=this._pluginLocal.options;if(this.loaded||!n)return;const{template:r,execScripts:s}=await b(n,{fetch:Q});this._mount(r,document.body);const a=U(t,{elementGetter:()=>{var p;return(p=this._root)===null||p===void 0?void 0:p.firstChild}}).instance.proxy;a.__shadow_mode__=!0,a.LSPluginLocal=this._pluginLocal,a.LSPluginShadow=this,a.LSPluginUser=a.logseq=new Vn(this._pluginLocal.toJSON(),this._pluginLocal.caller);const l=await s(a,!0);this._unmountFns.push(l.unmount),this._loaded=!0}_mount(t,n){const r=this._frame=document.createElement("div");r.classList.add("lsp-shadow-sandbox"),r.id=this._pluginLocal.id,this._root=r.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${t}</div>`,n.appendChild(r),this.emit("mounted")}_unmount(){for(const t of this._unmountFns)t&&t.call(null)}destroy(){var t,n;(t=this.frame)===null||t===void 0||(n=t.parentNode)===null||n===void 0||n.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var t;return(t=this._root)===null||t===void 0?void 0:t.firstChild}get frame(){return this._frame}}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const G=m()("LSPlugin:caller"),rt="#await#response#",St="#lspmsg#",_t="#lspmsg#error#",Et=e=>`#lspmsg#${e}`;class Xt extends u(){constructor(t){super(),L(this,"_pluginLocal",void 0),L(this,"_connected",!1),L(this,"_parent",void 0),L(this,"_child",void 0),L(this,"_shadow",void 0),L(this,"_status",void 0),L(this,"_userModel",{}),L(this,"_call",void 0),L(this,"_callUserModel",void 0),L(this,"_debugTag",""),this._pluginLocal=t,t&&(this._debugTag=t.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:t}=this._pluginLocal;t?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(t={}){if(this._connected)return;const n=this,r=this._pluginLocal!=null;let s=0;const a=new Map,l=T(6e4),p=this._extendUserModel({"#lspmsg#ready#":async D=>{p[Et(D?.pid)]=({type:F,payload:H})=>{G(`[host (_call) -> *user] ${this._debugTag}`,F,H),n.emit(F,H)},await l.resolve()},"#lspmsg#beforeunload#":async D=>{const F=T(1e4);n.emit("beforeunload",Object.assign({actor:F},D)),await F.promise},"#lspmsg#settings#":async({type:D,payload:F})=>{n.emit("settings:changed",F)},[St]:async({ns:D,type:F,payload:H})=>{G(`[host (async) -> *user] ${this._debugTag} ns=${D} type=${F}`,H),D&&D.startsWith("hook")?n.emit(`${D}:${F}`,H):n.emit(F,H)},"#lspmsg#reply#":({_sync:D,result:F})=>{if(G(`[sync host -> *user] #${D}`,F),a.has(D)){const H=a.get(D);H&&(F!=null&&F.hasOwnProperty(_t)?H.reject(F[_t]):H.resolve(F),a.delete(D))}},...t});var C;if(r)return await l.promise,JSON.parse(JSON.stringify((C=this._pluginLocal)===null||C===void 0?void 0:C.toJSON()));const P=new Oe(p).sendHandshakeReply();return this._status="pending",await P.then(D=>{this._child=D,this._connected=!0,this._call=async(F,H={},K)=>{if(K){const B=++s;a.set(B,K),H._sync=B,K.setTag(`async call #${B}`),G(`async call #${B}`)}return D.emit(Et(p.baseInfo.id),{type:F,payload:H}),K?.promise},this._callUserModel=async(F,H)=>{try{p[F](H)}catch{G(`[model method] #${F} not existed`)}},setInterval(()=>{if(a.size>100)for(const[F,H]of a)H.settled&&a.delete(F)},18e5)}).finally(()=>{this._status=void 0}),await l.promise,p.baseInfo}async call(t,n={}){var r;return(r=this._call)===null||r===void 0?void 0:r.call(this,t,n)}async callAsync(t,n={}){var r;const s=T(1e4);return(r=this._call)===null||r===void 0?void 0:r.call(this,t,n,s)}async callUserModel(t,...n){var r;return(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[t,...n])}async callUserModelAsync(t,...n){var r;return t=`${rt}${t}`,(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[t,...n])}async _setupIframeSandbox(){const t=this._pluginLocal,n=t.id,r=`${n}_lsp_main`,s=new URL(t.options.entry);s.searchParams.set("__v__",t.options.version);const a=document.querySelector(`#${r}`);a&&a.parentElement.removeChild(a);const l=document.createElement("div");l.classList.add("lsp-iframe-sandbox-container"),l.id=r,l.dataset.pid=n;try{var p;const F=(p=await this._pluginLocal._loadLayoutsData())===null||p===void 0?void 0:p.$$0;if(F){l.dataset.inited_layout="true";let{width:H,height:K,left:B,top:nt,vw:it,vh:mt}=F;B=Math.max(B,0),B=typeof it=="number"?`${Math.min(100*B/it,99)}%`:`${B}px`,nt=Math.max(nt,45),nt=typeof mt=="number"?`${Math.min(100*nt/mt,99)}%`:`${nt}px`,Object.assign(l.style,{width:H+"px",height:K+"px",left:B,top:nt})}}catch(F){console.error("[Restore Layout Error]",F)}document.body.appendChild(l);const C=new gt({id:n+"_iframe",container:l,url:s.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(t.toJSON()))}});let P,D=C.sendHandshake();return this._status="pending",new Promise((F,H)=>{P=setTimeout(()=>{H(new Error("handshake Timeout")),C.destroy()},4e3),D.then(K=>{this._parent=K,this._connected=!0,this.emit("connected"),K.on(Et(t.id),({type:B,payload:nt})=>{var it,mt;G("[user -> *host] ",B,nt),(it=this._pluginLocal)===null||it===void 0||it.emit(B,nt||{}),(mt=this._pluginLocal)===null||mt===void 0||mt.caller.emit(B,nt||{})}),this._call=async(...B)=>{await K.call(Et(t.id),{type:B[0],payload:Object.assign(B[1]||{},{$$pid:t.id})})},this._callUserModel=async(B,...nt)=>{if(B.startsWith(rt))return await K.get(B.replace(rt,""),...nt);K.call(B,nt?.[0])},F(null)}).catch(K=>{H(K)}).finally(()=>{clearTimeout(P)})}).catch(F=>{throw G("[iframe sandbox] error",F),F}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const t=this._pluginLocal,n=this._shadow=new xt(t);try{this._status="pending",await n.load(),this._connected=!0,this.emit("connected"),this._call=async(r,s={},a)=>{var l;return a&&(s.actor=a),(l=this._pluginLocal)===null||l===void 0||l.emit(r,Object.assign(s,{$$pid:t.id})),a?.promise},this._callUserModel=async(...r)=>{var s;let a=r[0];(s=a)!==null&&s!==void 0&&s.startsWith(rt)&&(a=a.replace(rt,""));const l=r[1]||{},p=this._userModel[a];typeof p=="function"&&await p.call(null,l)}}catch(r){throw G("[shadow sandbox] error",r),r}finally{this._status=void 0}}_extendUserModel(t){return Object.assign(this._userModel,t)}_getSandboxIframeContainer(){var t;return(t=this._parent)===null||t===void 0?void 0:t.frame.parentNode}_getSandboxShadowContainer(){var t;return(t=this._shadow)===null||t===void 0?void 0:t.frame.parentNode}_getSandboxIframeRoot(){var t;return(t=this._parent)===null||t===void 0?void 0:t.frame}_getSandboxShadowRoot(){var t;return(t=this._shadow)===null||t===void 0?void 0:t.frame}set debugTag(t){this._debugTag=t}async destroy(){var t;let n=null;this._parent&&(n=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(n=this._getSandboxShadowContainer(),this._shadow.destroy()),(t=n)===null||t===void 0||t.parentNode.removeChild(n)}}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class st{constructor(t,n){ct(this,"ctx",void 0),ct(this,"opts",void 0),this.ctx=t,this.opts=n}get ctxId(){return this.ctx.baseInfo.id}setItem(t,n){var r;return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,t,n,(r=this.opts)===null||r===void 0?void 0:r.assets]})}getItem(t){var n;return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,t,(n=this.opts)===null||n===void 0?void 0:n.assets]})}removeItem(t){var n;return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,t,(n=this.opts)===null||n===void 0?void 0:n.assets]})}allKeys(){var t;return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,(t=this.opts)===null||t===void 0?void 0:t.assets]})}clear(){var t;return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,(t=this.opts)===null||t===void 0?void 0:t.assets]})}hasItem(t){var n;return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,t,(n=this.opts)===null||n===void 0?void 0:n.assets]})}}class kt{constructor(t){var n,r,s;s=void 0,(r="ctx")in(n=this)?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,this.ctx=t}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(t,...n){var r,s;const a=this.ensureHostScope();return t=(r=j(t))===null||r===void 0?void 0:r.toLowerCase(),(s=a.logseq.api["exper_"+t])===null||s===void 0?void 0:s.apply(a,n)}async loadScripts(...t){(t=t.map(n=>n!=null&&n.startsWith("http")?n:this.ctx.resolveResourceFullUrl(n))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...t)}registerFencedCodeRenderer(t,n){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,t,n)}registerExtensionsEnhancer(t,n){const r=this.ensureHostScope();return t==="katex"&&r.katex&&n(r.katex).catch(console.error),r.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,t,n)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Lt=e=>`task_callback_${e}`;class Vt{constructor(t,n,r={}){Ot(this,"_client",void 0),Ot(this,"_requestId",void 0),Ot(this,"_requestOptions",void 0),Ot(this,"_promise",void 0),Ot(this,"_aborted",!1),this._client=t,this._requestId=n,this._requestOptions=r,this._promise=new Promise((p,C)=>{if(!this._requestId)return C(null);this._client.once(Lt(this._requestId),P=>{P&&P instanceof Error?C(P):p(P)})});const{success:s,fail:a,final:l}=this._requestOptions;this._promise.then(p=>{s?.(p)}).catch(p=>{a?.(p)}).finally(()=>{l?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class Tt extends _.EventEmitter{constructor(t){super(),Ot(this,"_ctx",void 0),this._ctx=t,this.ctx.caller.on("#lsp#request#callback",n=>{const r=n?.requestId;r&&this.emit(Lt(r),n?.payload)})}static createRequestTask(t,n,r){return new Vt(t,n,r)}async _request(t){const n=this.ctx.baseInfo.id,{success:r,fail:s,final:a,...l}=t,p=this.ctx.Experiments.invokeExperMethod("request",n,l),C=Tt.createRequestTask(this.ctx.Request,p,t);return l.abortable?C:C.promise}get ctx(){return this._ctx}}const At=Array.isArray,pe=typeof wn=="object"&&wn&&wn.Object===Object&&wn;var Cn=typeof self=="object"&&self&&self.Object===Object&&self;const Ft=pe||Cn||Function("return this")(),Ht=Ft.Symbol;var Ke=Object.prototype,Sn=Ke.hasOwnProperty,On=Ke.toString,he=Ht?Ht.toStringTag:void 0;const An=function(e){var t=Sn.call(e,he),n=e[he];try{e[he]=void 0;var r=!0}catch{}var s=On.call(e);return r&&(t?e[he]=n:delete e[he]),s};var Ye=Object.prototype.toString;const k=function(e){return Ye.call(e)};var M=Ht?Ht.toStringTag:void 0;const $=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":M&&M in Object(e)?An(e):k(e)},W=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},ft=function(e){if(!W(e))return!1;var t=$(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Nt=Ft["__core-js_shared__"];var qt,te=(qt=/[^.]+$/.exec(Nt&&Nt.keys&&Nt.keys.IE_PROTO||""))?"Symbol(src)_1."+qt:"";const Re=function(e){return!!te&&te in e};var Qe=Function.prototype.toString;const Zt=function(e){if(e!=null){try{return Qe.call(e)}catch{}try{return e+""}catch{}}return""};var jn=/^\[object .+?Constructor\]$/,En=Function.prototype,Tn=Object.prototype,Ae=En.toString,Mn=Tn.hasOwnProperty,In=RegExp("^"+Ae.call(Mn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Ln=function(e){return!(!W(e)||Re(e))&&(ft(e)?In:jn).test(Zt(e))},Ue=function(e,t){return e?.[t]},Pt=function(e,t){var n=Ue(e,t);return Ln(n)?n:void 0},Rt=function(){try{var e=Pt(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Xe=function(e,t,n){t=="__proto__"&&Rt?Rt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},je=function(e){return function(t,n,r){for(var s=-1,a=Object(t),l=r(t),p=l.length;p--;){var C=l[e?p:++s];if(n(a[C],C,a)===!1)break}return t}}(),De=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},ee=function(e){return e!=null&&typeof e=="object"},tn=function(e){return ee(e)&&$(e)=="[object Arguments]"};var en=Object.prototype,Fn=en.hasOwnProperty,nn=en.propertyIsEnumerable;const Mt=tn(function(){return arguments}())?tn:function(e){return ee(e)&&Fn.call(e,"callee")&&!nn.call(e,"callee")},me=function(){return!1};var Bt=Y&&!Y.nodeType&&Y,Ee=Bt&&!0&&J&&!J.nodeType&&J,Te=Ee&&Ee.exports===Bt?Ft.Buffer:void 0;const $e=(Te?Te.isBuffer:void 0)||me;var Nn=/^(?:0|[1-9]\d*)$/;const rn=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&Nn.test(e))&&e>-1&&e%1==0&&e<t},Me=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991};var tt={};tt["[object Float32Array]"]=tt["[object Float64Array]"]=tt["[object Int8Array]"]=tt["[object Int16Array]"]=tt["[object Int32Array]"]=tt["[object Uint8Array]"]=tt["[object Uint8ClampedArray]"]=tt["[object Uint16Array]"]=tt["[object Uint32Array]"]=!0,tt["[object Arguments]"]=tt["[object Array]"]=tt["[object ArrayBuffer]"]=tt["[object Boolean]"]=tt["[object DataView]"]=tt["[object Date]"]=tt["[object Error]"]=tt["[object Function]"]=tt["[object Map]"]=tt["[object Number]"]=tt["[object Object]"]=tt["[object RegExp]"]=tt["[object Set]"]=tt["[object String]"]=tt["[object WeakMap]"]=!1;const dt=function(e){return ee(e)&&Me(e.length)&&!!tt[$(e)]},on=function(e){return function(t){return e(t)}};var pt=Y&&!Y.nodeType&&Y,ne=pt&&!0&&J&&!J.nodeType&&J,at=ne&&ne.exports===pt&&pe.process,re=function(){try{var e=ne&&ne.require&&ne.require("util").types;return e||at&&at.binding&&at.binding("util")}catch{}}(),Ie=re&&re.isTypedArray;const ze=Ie?on(Ie):dt;var He=Object.prototype.hasOwnProperty;const sn=function(e,t){var n=At(e),r=!n&&Mt(e),s=!n&&!r&&$e(e),a=!n&&!r&&!s&&ze(e),l=n||r||s||a,p=l?De(e.length,String):[],C=p.length;for(var P in e)!t&&!He.call(e,P)||l&&(P=="length"||s&&(P=="offset"||P=="parent")||a&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||rn(P,C))||p.push(P);return p};var oe=Object.prototype;const Kt=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||oe)},qe=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object);var Be=Object.prototype.hasOwnProperty;const ie=function(e){if(!Kt(e))return qe(e);var t=[];for(var n in Object(e))Be.call(e,n)&&n!="constructor"&&t.push(n);return t},Le=function(e){return e!=null&&Me(e.length)&&!ft(e)},se=function(e){return Le(e)?sn(e):ie(e)},an=function(e,t){return e&&je(e,t,se)},Ge=function(){this.__data__=[],this.size=0},ae=function(e,t){return e===t||e!=e&&t!=t},Ut=function(e,t){for(var n=e.length;n--;)if(ae(e[n][0],t))return n;return-1};var ce=Array.prototype.splice;const cn=function(e){var t=this.__data__,n=Ut(t,e);return!(n<0)&&(n==t.length-1?t.pop():ce.call(t,n,1),--this.size,!0)},ln=function(e){var t=this.__data__,n=Ut(t,e);return n<0?void 0:t[n][1]},un=function(e){return Ut(this.__data__,e)>-1},We=function(e,t){var n=this.__data__,r=Ut(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function Yt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Yt.prototype.clear=Ge,Yt.prototype.delete=cn,Yt.prototype.get=ln,Yt.prototype.has=un,Yt.prototype.set=We;const le=Yt,Je=function(){this.__data__=new le,this.size=0},Gt=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Fe=function(e){return this.__data__.get(e)},fn=function(e){return this.__data__.has(e)},ge=Pt(Ft,"Map"),ye=Pt(Object,"create"),ue=function(){this.__data__=ye?ye(null):{},this.size=0},Pn=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var dn=Object.prototype.hasOwnProperty;const Ve=function(e){var t=this.__data__;if(ye){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return dn.call(t,e)?t[e]:void 0};var pn=Object.prototype.hasOwnProperty;const hn=function(e){var t=this.__data__;return ye?t[e]!==void 0:pn.call(t,e)},Rn=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ye&&t===void 0?"__lodash_hash_undefined__":t,this};function Dt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Dt.prototype.clear=ue,Dt.prototype.delete=Pn,Dt.prototype.get=Ve,Dt.prototype.has=hn,Dt.prototype.set=Rn;const Ne=Dt,Un=function(){this.size=0,this.__data__={hash:new Ne,map:new(ge||le),string:new Ne}},$t=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},ve=function(e,t){var n=e.__data__;return $t(t)?n[typeof t=="string"?"string":"hash"]:n.map},mn=function(e){var t=ve(this,e).delete(e);return this.size-=t?1:0,t},gn=function(e){return ve(this,e).get(e)},Dn=function(e){return ve(this,e).has(e)},be=function(e,t){var n=ve(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Ct(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ct.prototype.clear=Un,Ct.prototype.delete=mn,Ct.prototype.get=gn,Ct.prototype.has=Dn,Ct.prototype.set=be;const _e=Ct,yn=function(e,t){var n=this.__data__;if(n instanceof le){var r=n.__data__;if(!ge||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new _e(r)}return n.set(e,t),this.size=n.size,this};function Qt(e){var t=this.__data__=new le(e);this.size=t.size}Qt.prototype.clear=Je,Qt.prototype.delete=Gt,Qt.prototype.get=Fe,Qt.prototype.has=fn,Qt.prototype.set=yn;const we=Qt,$n=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},o=function(e){return this.__data__.has(e)};function S(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new _e;++t<n;)this.add(e[t])}S.prototype.add=S.prototype.push=$n,S.prototype.has=o;const x=S,et=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},lt=function(e,t){return e.has(t)},yt=function(e,t,n,r,s,a){var l=1&n,p=e.length,C=t.length;if(p!=C&&!(l&&C>p))return!1;var P=a.get(e),D=a.get(t);if(P&&D)return P==t&&D==e;var F=-1,H=!0,K=2&n?new x:void 0;for(a.set(e,t),a.set(t,e);++F<p;){var B=e[F],nt=t[F];if(r)var it=l?r(nt,B,F,t,e,a):r(B,nt,F,e,t,a);if(it!==void 0){if(it)continue;H=!1;break}if(K){if(!et(t,function(mt,It){if(!lt(K,It)&&(B===mt||s(B,mt,n,r,a)))return K.push(It)})){H=!1;break}}else if(B!==nt&&!s(B,nt,n,r,a)){H=!1;break}}return a.delete(e),a.delete(t),H},ht=Ft.Uint8Array,xe=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r,s){n[++t]=[s,r]}),n},Wt=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n};var jt=Ht?Ht.prototype:void 0,Ze=jt?jt.valueOf:void 0;const nr=function(e,t,n,r,s,a,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new ht(e),new ht(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ae(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=xe;case"[object Set]":var C=1&r;if(p||(p=Wt),e.size!=t.size&&!C)return!1;var P=l.get(e);if(P)return P==t;r|=2,l.set(e,t);var D=yt(p(e),p(t),r,s,a,l);return l.delete(e),D;case"[object Symbol]":if(Ze)return Ze.call(e)==Ze.call(t)}return!1},Pr=function(e,t){for(var n=-1,r=t.length,s=e.length;++n<r;)e[s+n]=t[n];return e},Rr=function(e,t,n){var r=t(e);return At(e)?r:Pr(r,n(e))},Ur=function(e,t){for(var n=-1,r=e==null?0:e.length,s=0,a=[];++n<r;){var l=e[n];t(l,n,e)&&(a[s++]=l)}return a},Dr=function(){return[]};var $r=Object.prototype.propertyIsEnumerable,rr=Object.getOwnPropertySymbols;const zr=rr?function(e){return e==null?[]:(e=Object(e),Ur(rr(e),function(t){return $r.call(e,t)}))}:Dr,or=function(e){return Rr(e,se,zr)};var Hr=Object.prototype.hasOwnProperty;const qr=function(e,t,n,r,s,a){var l=1&n,p=or(e),C=p.length;if(C!=or(t).length&&!l)return!1;for(var P=C;P--;){var D=p[P];if(!(l?D in t:Hr.call(t,D)))return!1}var F=a.get(e),H=a.get(t);if(F&&H)return F==t&&H==e;var K=!0;a.set(e,t),a.set(t,e);for(var B=l;++P<C;){var nt=e[D=p[P]],it=t[D];if(r)var mt=l?r(it,nt,D,t,e,a):r(nt,it,D,e,t,a);if(!(mt===void 0?nt===it||s(nt,it,n,r,a):mt)){K=!1;break}B||(B=D=="constructor")}if(K&&!B){var It=e.constructor,Ce=t.constructor;It==Ce||!("constructor"in e)||!("constructor"in t)||typeof It=="function"&&It instanceof It&&typeof Ce=="function"&&Ce instanceof Ce||(K=!1)}return a.delete(e),a.delete(t),K},zn=Pt(Ft,"DataView"),Hn=Pt(Ft,"Promise"),qn=Pt(Ft,"Set"),Bn=Pt(Ft,"WeakMap");var ir="[object Map]",sr="[object Promise]",ar="[object Set]",cr="[object WeakMap]",lr="[object DataView]",Br=Zt(zn),Gr=Zt(ge),Wr=Zt(Hn),Jr=Zt(qn),Vr=Zt(Bn),ke=$;(zn&&ke(new zn(new ArrayBuffer(1)))!=lr||ge&&ke(new ge)!=ir||Hn&&ke(Hn.resolve())!=sr||qn&&ke(new qn)!=ar||Bn&&ke(new Bn)!=cr)&&(ke=function(e){var t=$(e),n=t=="[object Object]"?e.constructor:void 0,r=n?Zt(n):"";if(r)switch(r){case Br:return lr;case Gr:return ir;case Wr:return sr;case Jr:return ar;case Vr:return cr}return t});const ur=ke;var fr="[object Arguments]",dr="[object Array]",vn="[object Object]",pr=Object.prototype.hasOwnProperty;const Zr=function(e,t,n,r,s,a){var l=At(e),p=At(t),C=l?dr:ur(e),P=p?dr:ur(t),D=(C=C==fr?vn:C)==vn,F=(P=P==fr?vn:P)==vn,H=C==P;if(H&&$e(e)){if(!$e(t))return!1;l=!0,D=!1}if(H&&!D)return a||(a=new we),l||ze(e)?yt(e,t,n,r,s,a):nr(e,t,C,n,r,s,a);if(!(1&n)){var K=D&&pr.call(e,"__wrapped__"),B=F&&pr.call(t,"__wrapped__");if(K||B){var nt=K?e.value():e,it=B?t.value():t;return a||(a=new we),s(nt,it,n,r,a)}}return!!H&&(a||(a=new we),qr(e,t,n,r,s,a))},hr=function e(t,n,r,s,a){return t===n||(t==null||n==null||!ee(t)&&!ee(n)?t!=t&&n!=n:Zr(t,n,r,s,e,a))},Kr=function(e,t,n,r){var s=n.length,a=s,l=!r;if(e==null)return!a;for(e=Object(e);s--;){var p=n[s];if(l&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++s<a;){var C=(p=n[s])[0],P=e[C],D=p[1];if(l&&p[2]){if(P===void 0&&!(C in e))return!1}else{var F=new we;if(r)var H=r(P,D,C,e,t,F);if(!(H===void 0?hr(D,P,3,r,F):H))return!1}}return!0},mr=function(e){return e==e&&!W(e)},Yr=function(e){for(var t=se(e),n=t.length;n--;){var r=t[n],s=e[r];t[n]=[r,s,mr(s)]}return t},gr=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},Qr=function(e){var t=Yr(e);return t.length==1&&t[0][2]?gr(t[0][0],t[0][1]):function(n){return n===e||Kr(n,e,t)}},Gn=function(e){return typeof e=="symbol"||ee(e)&&$(e)=="[object Symbol]"};var Xr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,to=/^\w*$/;const Wn=function(e,t){if(At(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!Gn(e))||to.test(e)||!Xr.test(e)||t!=null&&e in Object(t)};function Jn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,s=t?t.apply(this,r):r[0],a=n.cache;if(a.has(s))return a.get(s);var l=e.apply(this,r);return n.cache=a.set(s,l)||a,l};return n.cache=new(Jn.Cache||_e),n}Jn.Cache=_e;const eo=Jn;var no=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ro=/\\(\\)?/g;const oo=function(e){var t=eo(e,function(r){return n.size===500&&n.clear(),r}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(no,function(n,r,s,a){t.push(s?a.replace(ro,"$1"):r||n)}),t}),io=function(e,t){for(var n=-1,r=e==null?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s};var yr=Ht?Ht.prototype:void 0,vr=yr?yr.toString:void 0;const so=function e(t){if(typeof t=="string")return t;if(At(t))return io(t,e)+"";if(Gn(t))return vr?vr.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},ao=function(e){return e==null?"":so(e)},br=function(e,t){return At(e)?e:Wn(e,t)?[e]:oo(ao(e))},bn=function(e){if(typeof e=="string"||Gn(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},_r=function(e,t){for(var n=0,r=(t=br(t,e)).length;e!=null&&n<r;)e=e[bn(t[n++])];return n&&n==r?e:void 0},co=function(e,t,n){var r=e==null?void 0:_r(e,t);return r===void 0?n:r},lo=function(e,t){return e!=null&&t in Object(e)},uo=function(e,t,n){for(var r=-1,s=(t=br(t,e)).length,a=!1;++r<s;){var l=bn(t[r]);if(!(a=e!=null&&n(e,l)))break;e=e[l]}return a||++r!=s?a:!!(s=e==null?0:e.length)&&Me(s)&&rn(l,s)&&(At(e)||Mt(e))},fo=function(e,t){return e!=null&&uo(e,t,lo)},po=function(e,t){return Wn(e)&&mr(t)?gr(bn(e),t):function(n){var r=co(n,e);return r===void 0&&r===t?fo(n,e):hr(t,r,3)}},ho=function(e){return e},mo=function(e){return function(t){return t?.[e]}},go=function(e){return function(t){return _r(t,e)}},yo=function(e){return Wn(e)?mo(bn(e)):go(e)},vo=function(e){return typeof e=="function"?e:e==null?ho:typeof e=="object"?At(e)?po(e[0],e[1]):Qr(e):yo(e)},bo=function(e,t){var n={};return t=vo(t),an(e,function(r,s,a){Xe(n,t(r,s,a),r)}),n};function wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class _o{constructor(t,n){wr(this,"ctx",void 0),wr(this,"serviceHooks",void 0),this.ctx=t,this.serviceHooks=n,t._execCallableAPI("register-search-service",t.baseInfo.id,n.name,n.options),Object.entries({query:{f:"onQuery",args:["graph","q",!0],reply:!0,transformOutput:r=>(At(r?.blocks)&&(r.blocks=r.blocks.map(s=>s&&bo(s,(a,l)=>`block/${l}`))),r)},rebuildBlocksIndice:{f:"onIndiceInit",args:["graph","blocks"]},transactBlocks:{f:"onBlocksChanged",args:["graph","data"]},truncateBlocks:{f:"onIndiceReset",args:["graph"]},removeDb:{f:"onGraph",args:["graph"]}}).forEach(([r,s])=>{const a=(l=>`service:search:${l}:${n.name}`)(r);t.caller.on(a,async l=>{if(ft(n?.[s.f])){let p=null;try{p=await n[s.f].apply(n,(s.args||[]).map(C=>{if(l){if(C===!0)return l;if(l.hasOwnProperty(C)){const P=l[C];return delete l[C],P}}})),s.transformOutput&&(p=s.transformOutput(p))}catch(C){console.error("[SearchService] ",C),p=C}finally{s.reply&&t.caller.call(`${a}:reply`,p)}}})})}}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wo=Symbol.for("proxy-continue"),xo=m()("LSPlugin:user"),xr=new R("",{console:!0});function Pe(e,t,n){var r;const{key:s,label:a,desc:l,palette:p,keybinding:C,extras:P}=t;if(typeof n!="function")return this.logger.error(`${s||a}: command action should be function.`),!1;const D=function(H){if(typeof H=="string")return H.trim().replace(/\s/g,"_").toLowerCase()}(s);if(!D)return this.logger.error(`${a}: command key is required.`),!1;const F=`SimpleCommandHook${D}${++Sr}`;this.Editor["on"+F](n),(r=this.caller)===null||r===void 0||r.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:D,label:a,type:e,desc:l,keybinding:C,extras:P},["editor/hook",F]],p]})}function kr(e){return!(typeof(t=e)!="string"||t.length!==36||!/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(t))||(xr.error(`#${e} is not a valid UUID string.`),!1);var t}let _n=null,Cr=new Map;const ko={async getInfo(e){return _n||(_n=await this._execCallableAPIAsync("get-app-info")),typeof e=="string"?_n[e]:_n},registerCommand:Pe,registerSearchService(e){if(Cr.has(e.name))throw new Error(`SearchService: #${e.name} has registered!`);Cr.set(e.name,new _o(this,e))},registerCommandPalette(e,t){const{key:n,label:r,keybinding:s}=e;return Pe.call(this,"$palette$",{key:n,label:r,palette:!0,keybinding:s},t)},registerCommandShortcut(e,t,n={}){typeof e=="string"&&(e={mode:"global",binding:e});const{binding:r}=e,s="$shortcut$",a=n.key||s+j(r?.toString());return Pe.call(this,s,{...n,key:a,palette:!1,keybinding:e},t)},registerUIItem(e,t){var n;const r=this.baseInfo.id;(n=this.caller)===null||n===void 0||n.call("api:call",{method:"register-plugin-ui-item",args:[r,e,t]})},registerPageMenuItem(e,t){if(typeof t!="function")return!1;const n=e+"_"+this.baseInfo.id,r=e;Pe.call(this,"page-menu-item",{key:n,label:r},t)},onBlockRendererSlotted(e,t){if(!kr(e))return;const n=this.baseInfo.id,r=`hook:editor:${j(`slot:${e}`)}`;return this.caller.on(r,t),this.App._installPluginHook(n,r),()=>{this.caller.off(r,t),this.App._uninstallPluginHook(n,r)}},invokeExternalPlugin(e,...t){var n;if(!(e=(n=e)===null||n===void 0?void 0:n.trim()))return;let[r,s]=e.split(".");if(!["models","commands"].includes(s?.toLowerCase()))throw new Error("Type only support '.models' or '.commands' currently.");const a=e.replace(`${r}.${s}.`,"");if(!r||!s||!a)throw new Error(`Illegal type of #${e} to invoke external plugin.`);return this._execCallableAPIAsync("invoke_external_plugin_cmd",r,s.toLowerCase(),a,t)},setFullScreen(e){const t=(...n)=>this._callWin("setFullScreen",...n);e==="toggle"?this._callWin("isFullScreen").then(n=>{n?t():t(!0)}):e?t(!0):t()}};let Sr=0;const Co={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(e,t){var n;xo("Register slash command #",this.baseInfo.id,e,t),typeof t=="function"&&(t=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",t]]),t=t.map(r=>{const[s,...a]=r;if(s==="editor/hook"){let l=a[0],p=()=>{var P;(P=this.caller)===null||P===void 0||P.callUserModel(l)};typeof l=="function"&&(p=l);const C=`SlashCommandHook${s}${++Sr}`;r[1]=C,this.Editor["on"+C](p)}return r}),(n=this.caller)===null||n===void 0||n.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[e,t]]})},registerBlockContextMenuItem(e,t){if(typeof t!="function")return!1;const n=e+"_"+this.baseInfo.id;Pe.call(this,"block-context-menu-item",{key:n,label:e},t)},registerHighlightContextMenuItem(e,t,n){if(typeof t!="function")return!1;const r=e+"_"+this.baseInfo.id;Pe.call(this,"highlight-context-menu-item",{key:r,label:e,extras:n},t)},scrollToBlockInPage(e,t,n){const r="block-content-"+t;n!=null&&n.replaceState?this.App.replaceState("page",{name:e},{anchor:r}):this.App.pushState("page",{name:e},{anchor:r})}},So={onBlockChanged(e,t){if(!kr(e))return;const n=this.baseInfo.id,r=`hook:db:${j(`block:${e}`)}`,s=({block:a,txData:l,txMeta:p})=>{a.uuid===e&&t(a,l,p)};return this.caller.on(r,s),this.App._installPluginHook(n,r),()=>{this.caller.off(r,s),this.App._uninstallPluginHook(n,r)}},datascriptQuery(e,...t){return t.pop(),t!=null&&t.some(n=>typeof n=="function")?this.Experiments.ensureHostScope().logseq.api.datascript_query(e,...t):this._execCallableAPIAsync("datascript_query",e,...t)}},Oo={},Ao={},jo={makeSandboxStorage(){return new st(this,{assets:!0})}};class Vn extends u(){constructor(t,n){super(),zt(this,"_baseInfo",void 0),zt(this,"_caller",void 0),zt(this,"_version","0.0.17"),zt(this,"_debugTag",""),zt(this,"_settingsSchema",void 0),zt(this,"_connected",!1),zt(this,"_ui",new Map),zt(this,"_mFileStorage",void 0),zt(this,"_mRequest",void 0),zt(this,"_mExperiments",void 0),zt(this,"_beforeunloadCallback",void 0),this._baseInfo=t,this._caller=n,n.on("sys:ui:visible",r=>{r!=null&&r.toggle&&this.toggleMainUI()}),n.on("settings:changed",r=>{const s=Object.assign({},this.settings),a=Object.assign(this._baseInfo.settings,r);this.emit("settings:changed",{...a},s)}),n.on("beforeunload",async r=>{const{actor:s,...a}=r,l=this._beforeunloadCallback;try{l&&await l(a),s?.resolve(null)}catch(p){this.logger.error("[beforeunload] ",p),s?.reject(p)}})}async ready(t,n){var r,s;if(!this._connected)try{var a;typeof t=="function"&&(n=t,t={});let l=await this._caller.connectToParent(t);this._connected=!0,r=this._baseInfo,s=l,l=E()(r,s,{arrayMerge:(p,C)=>C}),this._baseInfo=l,(a=l)!==null&&a!==void 0&&a.id&&(this._debugTag=this._caller.debugTag=`#${l.id} [${l.name}]`,this.logger.setTag(this._debugTag)),this._settingsSchema&&(l.settings=function(p,C){const P=(C||[]).reduce((D,F)=>("default"in F&&(D[F.key]=F.default),D),{});return Object.assign(P,p)}(l.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema));try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(p){console.warn(p)}n&&n.call(this,l)}catch(l){console.error(`${this._debugTag} [Ready Error]`,l)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(t){typeof t=="function"&&(this._beforeunloadCallback=t)}provideModel(t){return this.caller._extendUserModel(t),this}provideTheme(t){return this.caller.call("provider:theme",t),this}provideStyle(t){return this.caller.call("provider:style",t),this}provideUI(t){return this.caller.call("provider:ui",t),this}useSettingsSchema(t){return this.connected&&this.caller.call("settings:schema",{schema:t,isSync:!0}),this._settingsSchema=t,this}updateSettings(t){this.caller.call("settings:update",t)}onSettingsChanged(t){const n="settings:changed";return this.on(n,t),()=>this.off(n,t)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(t){this.caller.call("main-ui:attrs",t)}setMainUIInlineStyle(t){this.caller.call("main-ui:style",t)}hideMainUI(t){const n={key:0,visible:!1,cursor:t?.restoreEditingCursor};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}showMainUI(t){const n={key:0,visible:!0,autoFocus:t?.autoFocus};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}toggleMainUI(){const n=this._ui.get(0);n&&n.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const t=this._ui.get(0);return!!(t&&t.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get effect(){return(t=this)&&(((n=t.baseInfo)===null||n===void 0?void 0:n.effect)||!((r=t.baseInfo)!==null&&r!==void 0&&r.iir));var t,n,r}get logger(){return xr}get settings(){var t;return(t=this.baseInfo)===null||t===void 0?void 0:t.settings}get caller(){return this._caller}resolveResourceFullUrl(t){if(this.ensureConnected(),t)return t=t.replace(/^[.\\/]+/,""),A(this._baseInfo.lsr,t)}_makeUserProxy(t,n){const r=this,s=this.caller;return new Proxy(t,{get(a,l,p){const C=a[l];return function(...P){if(C){const F=C.apply(r,P.concat(n));if(F!==wo)return F}if(n){const F=l.toString().match(/^(once|off|on)/i);if(F!=null){const H=F[0].toLowerCase(),K=F.input,B=H==="off",nt=r.baseInfo.id;let it=K.slice(H.length),mt=P[0],It=P[1];typeof mt=="string"&&typeof It=="function"&&(mt=mt.replace(/^logseq./,":"),it=`${it}${mt}`,mt=It,It=P[2]),it=`hook:${n}:${j(it)}`,s[H](it,mt);const Ce=()=>{s.off(it,mt),s.listenerCount(it)||r.App._uninstallPluginHook(nt,it)};return B?void Ce():(r.App._installPluginHook(nt,it,It),Ce)}}let D=l;return["git","ui","assets"].includes(n)&&(D=n+"_"+D),s.callAsync("api:call",{tag:n,method:D,args:P})}}})}_execCallableAPIAsync(t,...n){return this._caller.callAsync("api:call",{method:t,args:n})}_execCallableAPI(t,...n){this._caller.call("api:call",{method:t,args:n})}_callWin(...t){return this._execCallableAPIAsync("_callMainWin",...t)}get App(){return this._makeUserProxy(ko,"app")}get Editor(){return this._makeUserProxy(Co,"editor")}get DB(){return this._makeUserProxy(So,"db")}get Git(){return this._makeUserProxy(Oo,"git")}get UI(){return this._makeUserProxy(Ao,"ui")}get Assets(){return this._makeUserProxy(jo,"assets")}get FileStorage(){let t=this._mFileStorage;return t||(t=this._mFileStorage=new st(this)),t}get Request(){let t=this._mRequest;return t||(t=this._mRequest=new Tt(this)),t}get Experiments(){let t=this._mExperiments;return t||(t=this._mExperiments=new kt(this)),t}}function Or(e,t){return new Vn(e,t)}if(window.__LSP__HOST__==null){const e=new Xt(null);window.logseq=Or({},e)}})(),vt})())})(kn,kn.exports);kn.exports;const Fr="en";let xn=Fr,Nr={};async function Eo({defaultLocale:J=Fr,builtinTranslations:Y}){xn=(await logseq.App.getUserConfigs()).preferredLanguage,xn!==J&&Y?.[xn]!=null&&(Nr=Y)}function fe(J,Y){const de=Nr[xn]?.[J]??J;return Y==null?de:Object.entries(Y).reduce((Jt,[V,vt])=>Jt.replaceAll(`\${${V}}`,vt),de)}const To={"Enable task marker color":"タスクにマーカーカラーをつける","Enable Bold task mark":"タスクを太字にする","Enable Bold task marker":"タスクのマーカーを太字にする","Unset `font-family` in `html` For fast font loading":"フォントの読み込みを高速化するために、font-family指定を削除する","Left Sidebar Menu":"左サイドバーのメニュー","Remove `Graph View` button":"グラフビューボタンを削除する","Increase the gap between favorites and history a little":"お気に入りと履歴の間隔を少し広げる","Adjust the position of favorites and history":"お気に入りと履歴の位置を調整する","Unset background color":"背景色を変更する"},Mo="body>div#root>div>main>div#app-container a.block-marker{&:is(.NOW,.DOING){color:#06c235}&.LATER{color:#e88438}&.TODO{color:#d3455b}&.WAITING{color:#f6c423}}",Io="body>div#root>div>main>div#app-container a.block-marker:is(.NOW,.DOING,.DONE,.TODO,.WAITING,.LATER){font-weight:bolder;font-size:1.1em}",Lo=".dark-theme,html[data-theme=dark]{--ls-page-properties-background-color: #3e393d57 }body{>div#root>div>main{.rounded{border-radius:.4em}& input[type=checkbox].form-checkbox{border-radius:5px;&:checked{background-color:var(--ls-selection-background-color)}}& div{&.ui__modal-overlay div{opacity:.5}&.block-content :is(h1,h2,h3,h4,h5,h6){padding-left:.5em;border-radius:.2em}&:is(.ui__modal-panel,.menu-links-outer,.menu-links-wrapper){border:2px solid var(--ls-border-color);box-shadow:0 0 7px var(--ls-border-color)}&.cp__plugins-settings-inner{>span.edit-file{top:-1em}& div.desc-item{>h2 code{display:none}& input.form-input{background-color:var(--ls-tertiary-background-color)}}}}>div#app-container div{&#left-sidebar>div.left-sidebar-inner div{&.nav-content-item div.header{margin-left:-.8em;margin-top:1em;background-color:var(--ls-tertiary-background-color)}&.favorites:not(:has(li.favorite-item)),&.recent:not(:has(li.recent-item)){display:none}}&#custom-context-menu,&.dropdown-wrapper{z-index:var(--ls-z-index-level-5)}&[label=plugin-settings-modal] div{&.ui__modal-panel{min-height:60vh;& div.cp__settings-inner aside{height:100%;margin-bottom:3em;& ul li{padding:11px}}}}}}&[data-page=home]>div#root>div>main div#main-content-container{z-index:0}}",Fo=async()=>{await Eo({builtinTranslations:{ja:To}}),logseq.useSettingsSchema(No()),logseq.settings||setTimeout(()=>logseq.showSettingsUI(),300),logseq.settings.removeMenuGraphView===!0&&Er(),logseq.settings.taskColor===!0&&Ar(),logseq.settings.taskBold===!0&&jr(),logseq.settings.fontFamilyUnset===!0&&Tr(),logseq.settings.leftSidebarMenuHeight===!0&&Mr(),logseq.settings.leftSidebarMenuJustifyContent!=="unset"&&Ir(logseq.settings.leftSidebarMenuJustifyContent),logseq.settings.leftSidebarMenuBackground!=="Theme color"&&Lr(logseq.settings.leftSidebarMenuBackground),logseq.provideStyle({key:"common",style:Lo}),logseq.onSettingsChanged((J,Y)=>{Y.taskColor===!0&&J.taskColor===!1?Se(Zn):Y.taskColor===!1&&J.taskColor===!0&&Ar(),Y.taskBold===!0&&J.taskBold===!1?Se(Kn):Y.taskBold===!1&&J.taskBold===!0&&jr(),Y.removeMenuGraphView!==!0&&J.removeMenuGraphView===!0?Er():Y.removeMenuGraphView===!0&&J.removeMenuGraphView!==!0&&Se(Yn),Y.fontFamilyUnset!==!0&&J.fontFamilyUnset===!0?Tr():Y.fontFamilyUnset===!0&&J.fontFamilyUnset!==!0&&Se(Qn),Y.leftSidebarMenuHeight!==!0&&J.leftSidebarMenuHeight===!0?Mr():Y.leftSidebarMenuHeight===!0&&J.leftSidebarMenuHeight!==!0&&Se(Xn),Y.leftSidebarMenuJustifyContent!==J.leftSidebarMenuJustifyContent&&(J.leftSidebarMenuJustifyContent==="unset"?Se(tr):Ir(J.leftSidebarMenuJustifyContent)),Y.leftSidebarMenuBackground!==J.leftSidebarMenuBackground&&(J.leftSidebarMenuBackground!=="Theme color"?Lr(J.leftSidebarMenuBackground):Se(er))})},Zn="taskColor",Ar=()=>logseq.provideStyle({key:Zn,style:Mo}),Kn="taskBold",jr=()=>logseq.provideStyle({key:Kn,style:Io}),Yn="removeMenuGraphView",Er=()=>logseq.provideStyle({key:Yn,style:String.raw`
  body>div#root>div>main div#left-sidebar div.graph-view-nav {
    display:none;
  }
`}),Qn="fontFamilyUnset",Tr=()=>logseq.provideStyle({key:Qn,style:String.raw`
  html:not(.is-native-android) {
    font-family: unset !important;
    /* var(--ls-font-family) */
  }
`}),Xn="leftSidebarMenuHeight",Mr=()=>logseq.provideStyle({key:Xn,style:String.raw`
  body>div#root>div>main div#left-sidebar div.left-sidebar-inner div.nav-content-item ul a .page-title {
    min-height: 2em;
    margin-right: -1em;
    white-space: pre-wrap;
  }
`}),tr="leftSidebarMenuJustifyContent",Ir=J=>logseq.provideStyle({key:tr,style:String.raw`
  body>div#root>div>main div#left-sidebar div.left-sidebar-inner div.nav-contents-container {
    justify-content: ${J};
  }
`}),er="leftSidebarMenuBackground",Lr=J=>{J!=="Theme color"&&logseq.provideStyle({key:er,style:String.raw`
  html[data-theme=dark]>body>div#root>div,
  body>div#root>div.dark-theme {
    &>main div#left-sidebar div.left-sidebar-inner {
      background-color: ${J};
    }
  }
`})},Se=J=>{const Y=parent.document.head.querySelector(`style[data-injected-style^="${J}"]`);Y&&Y.remove()},No=()=>[{key:Qn,title:fe("Unset `font-family` in `html` For fast font loading"),type:"boolean",default:!1,description:"default: false"},{key:Zn,type:"boolean",title:fe("Enable task marker color"),description:"",default:!1},{key:Kn,type:"boolean",title:fe("Enable Bold task marker"),description:"",default:!1},{key:"headingLeftSidebarMenu",title:fe("Left Sidebar Menu"),type:"heading",description:"",default:""},{key:Yn,title:fe("Remove `Graph View` button"),type:"boolean",default:!1,description:""},{key:Xn,title:fe("Increase the gap between favorites and history a little"),type:"boolean",default:!0,description:"default: true"},{key:tr,title:fe("Adjust the position of favorites and history"),type:"enum",enumChoices:["unset","space-evenly","center","space-around"],default:"unset",description:"default: unset"},{key:er,title:fe("Unset background color"),type:"enum",enumChoices:["Theme color","black","navy","#2e2930","unset"],default:"Theme color",description:`
    default: Theme color
    unset: primary background color)
    #2e2930: dark purple
    `}];logseq.ready(Fo).catch(console.error);
